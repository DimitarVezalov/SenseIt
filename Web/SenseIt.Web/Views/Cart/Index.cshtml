@using SenseIt.Web.ViewModels.Products
@using SenseIt.Common;
@model IEnumerable<ProductInCartViewModel>

@if (Model.Count() == 0)
{
    <div class="justify-content-center pt-4">
        <h2 class="text-center">The Shopping Cart Is Empty</h2>
    </div>
}
else
{
    <form method="post">
        <div class="container mb-4">
            <div class="row">
                <div class="col-12">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col"> </th>
                                    <th scope="col">Product</th>
                                    <th scope="col" class="text-center">Quantity</th>
                                    <th scope="col" class="text-right">Price</th>
                                    <th> </th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var prod in Model)
                                {
                                    <tr style="background-color: ActiveCaption">
                                        <td><img src=@prod.ImageUrl class="img-thumbnail" style="width: 100px; height: 120px;" /> </td>
                                        <td class="text-dark">@prod.Name</td>
                                        <td class="text-dark"><input class="form-control" type="number" value="@prod.Quantity" /></td>
                                        <td class="text-right text-dark">$@((prod.Quantity * prod.Price).ToString("F2"))</td>
                                        <td class="text-right"><a class="btn btn-outline-danger" asp-action="Remove" asp-route-id="@prod.Id"><i class="fas fa-trash-alt text-dark"></i> </a> </td>
                                    </tr>
                                }

                                <tr style="background-color: ActiveCaption">
                                    <td></td>
                                    <td></td>
                                    <td></td>

                                    <td>Sub-Total</td>
                                    <td class="text-right text-dark">
                                        @{
                                            var subTotal = Model.Sum(x => x.Price * x.Quantity);
                                        }
                                        $@subTotal
                                    </td>
                                </tr>
                                <tr style="background-color: ActiveCaption">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>Shipping</td>
                                    <td class="text-right text-dark">$@GlobalConstants.ShippingFee</td>
                                </tr>
                                <tr style="background-color: ActiveCaption">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><strong>Total</strong></td>
                                    <td class="text-right text-dark"><strong>$@((subTotal + GlobalConstants.ShippingFee).ToString("F2"))</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col mb-2">
                    <div class="row">
                        <div class="col-sm-12  col-md-6">
                            <button class="btn btn-block btn-outline-info" asp-controller="Store" asp-action="All">Continue Shopping</button>
                        </div>
                        <div class="col-sm-12 col-md-6 text-end">
                            <button class="btn btn-block btn-outline-success">Checkout</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
}


